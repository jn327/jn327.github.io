<!DOCTYPE html>
<html lang = "en"> <!-- language flag, used by screen readers -->
<head>
  <meta charset = "uft-8" /> <!-- character set definition -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, minimum-scale=0.5">

  <title>Josh Newland's page</title>
  <!-- imports  CSS definitions with media queries-->
  <link rel= "stylesheet" href ="styles/shared.css">
  <link rel= "stylesheet" href ="styles/topBar.css">

  <link rel= "stylesheet" href ="styles/index.css">

</head>
<body>

  <div id="canvasContainer" class="toBlur" >
  </div>

  <div id="contentContainer">
    <div id="about" class="labelsContainer">
      <a class="standardButton-close" id="close-about" target="_blank" >x</a>

      <p id="headerLabel" >Hi, I'm Josh Newland</p>
      <p id="descriptionLabel" style="padding-bottom:12px;" >I'm a software programmer from the UK, with an interest in games and web development, procedural generation & good stories</p>

      <a class="standardButton" href="https://docs.google.com/document/d/1aoY__ax24UL680VNK6I426u9ZPTJPOzOeF7xRY3nEOI/edit?usp=sharing" target="_blank" >Check out my CV</a>
    </div>

    <div id="projects" class="labelsContainer">
      <a class="standardButton-close" id="close-projects" target="_blank" >x</a>

      <p id="headerLabel" >Projects</p>

      <div class="scrollContainer" style="padding-right:24px; padding-top:24px;">
        <p id="gridHeaderLabel" >AAA Games</p>
        <ul class="projects-grid" id="aaaProjectsGrid"> </ul>

        <p id="gridHeaderLabel" style="padding-top:32px;" >Indie Games</p>
        <p id="descriptionLabel" >
          Most of my smaller game projects can be found on
          <a href="https://gamejolt.com/@Jn327/games" target="_blank" >Game Jolt</a>
          & <a href="https://jn327.itch.io/" target="_blank" >Itch.io</a>
        </p>

        <p id="gridHeaderLabel" style="padding-top:32px;" >Other experiments</p>
        <ul class="projects-grid" id="otherProjectsGrid"> </ul>
      </div>
    </div>
  </div>

  <!-- scripts -->
  <script src="scripts/CommonElementsCreator.js"></script>
  <script>
    //set canvas container.
    CommonElementsCreator.defaultCanvasParent = document.getElementById("canvasContainer");

    var headerIds = ["about", "projects"];
    var headerElements = [];
    var closeBtn;

    var visHeaderItemIndex = -1;
    var noHeaderHash = "#clear";
    var currUrlHash = window.location.hash;
    var urlHeaderIndex = (currUrlHash == noHeaderHash) ? -1 : 0;

    for (var k = 0; k < headerIds.length; k++)
    {
      headerElements.push ( document.getElementById(headerIds[k]) );

      var closeBtn = document.getElementById("close-"+headerIds[k]);
      closeBtn.addEventListener( "click", function() { onHeaderCloseButton() } );

      if ( currUrlHash != "" )
      {
        var hashedId = "#"+headerIds[k];
        if (hashedId == currUrlHash)
        {
          urlHeaderIndex = k;
        }
      }
    }

    //creating the header
    CommonElementsCreator.createHeaderElement();
    var headerBtns = CommonElementsCreator.addLinksToHeader( [ "About me", "Projects" ] );

    //set the selected item.
    setSelectedHeaderItem(urlHeaderIndex);

    //listeners for header buttons
    for (var i = 0; i < headerBtns.length; i++)
    {
      headerBtns[i].addEventListener( "click", bindClickToIndex(i) );
    }

    function bindClickToIndex(i)
    {
      // have to wrap it in a closure as when adding event listeners javascript will
      //put them to one side then add them later on once the for loop is done and the value of of i has changed.
      //see https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example
      return function() { setSelectedHeaderItem(i); };
    }

    function onHeaderCloseButton()
    {
      setSelectedHeaderItem(-1);
    }

    function setSelectedHeaderItem( index )
    {
      if (index == visHeaderItemIndex)
      {
        index = -1;
        //return;
      }
      window.location.hash = index >= 0 ? "#"+headerIds[index] : noHeaderHash

      canvasContainer.className = index >= 0 ? "blurred" : "toBlur";

      visHeaderItemIndex = index;
      for (var j = 0; j < headerElements.length; j++)
      {
        headerElements[j].className = (j == index) ? 'labelsContainer-active' : 'labelsContainer';
        headerBtns[j].className = (j == index) ? "headerLink-active" : "headerLink";
      }
    }

    //Creating project elements
    var aaaProjectsData = [];
    aaaProjectsData.push( {
      title       : "Planet Coaster",
      image       : "images/projects/PlanCo.gif",
      imgFit      : "cover",
      description : "UI developer"
    } );
    aaaProjectsData.push( {
      title       : "Jurassic World Evolution",
      image       : "images/projects/Jwe.gif",
      imgFit      : "cover",
      description : "UI developer"
    } );
    aaaProjectsData.push( {
      title       : "Planet Zoo",
      image       : "images/projects/PlanZoo.gif",
      imgFit      : "cover",
      description : "UI developer"
    } );

    var otherProjectsData = [];
    otherProjectsData.push( {
      title       : "RichRap 3dr delta printer",
      image       : "images/projects/3dPrinter.gif",
      imgFit      : "contain",
      description : "Assembled 3D printer and setup Marlin on an Arduino."
    } );
    otherProjectsData.push( {
      title       : "LED curtain",
      image       : "images/projects/leds.gif",
      imgFit      : "cover",
      description : "Connected some LED strips up to a Raspberry PI using fadeCandy boards to control the LEDs via web browser on the local network."
    } );
    otherProjectsData.push( {
      title       : "2000 origami cranes",
      image       : "images/projects/Origami.png",
      imgFit      : "cover",
      description : "Lots of origami cranes"
    } );
    otherProjectsData.push( {
      title       : "Fiber optic constellations",
      image       : "images/projects/Constellations.png",
      imgFit      : "cover",
      description : "Fiber optic constellations"
    } );

    createProjectElements( "otherProjectsGrid", otherProjectsData );
    createProjectElements( "aaaProjectsGrid", aaaProjectsData );

    function createProjectElements( gridId, itemsData )
    {
      var grid = document.getElementById(gridId);

      var theData;
      var container;
      var img;
      for (var j = 0; j < itemsData.length; j++)
      {
        theData = itemsData[j];

        container = document.createElement('li');
        //container.textContent = theData.title;

        img = document.createElement('img');
        img.src = theData.image;
        img.alt = "Image file not found: " +theData.image;
        img.style.objectFit = theData.imgFit;
        container.appendChild(img);

        grid.appendChild(container);
      }
    }


  </script>

  <script src="scripts/FullScreenEffects/VectorField/Main.js"></script>

</body>
</html>
